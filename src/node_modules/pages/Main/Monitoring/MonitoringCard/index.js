import React, {useState, useEffect} from 'react'

import CardHeader from './CardHeader'
import CardItem from './CardItem'

const MonitoringCard = () => {
    const [monitoring, setMonitoring] = useState([])

    useEffect(() => {
        let url = '/api/monitoring';

        fetch(url)
            .then(res => res.json())
            .then(json => {
                setMonitoring(json.monitorings)
            })
            .catch(err => {
                console.log(err)
            })
    }, [])

    return (
        <div className='monitoring-view h-100'>
            <div className='app-card'>
                <div className='app-card__body p-relative'>
                    <div className='card-sub-title'>
                        <CardHeader/>
                    </div>
                    <div className='card-sub-body px-6'>
                        {monitoring.map(item => (<CardItem key={item.id} item={item} />))}
                    </div>
                    <div className='card-shadow p-absolute w-100' />
                </div>
            </div>
        </div>
    )
}

export default MonitoringCard