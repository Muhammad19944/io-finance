
import React, {useState, useEffect, useContext} from 'react'
import {Link} from 'react-router-dom'

import {MainRouteChunk} from 'layout/Main'

import AccountItems from './AccountItems'

const Accounts = () => {
    const path = useContext(MainRouteChunk)

    const [account, setAccount] = useState([])

    useEffect(() => {
        let url = `/api/account`;

        fetch(url)
            .then(res => res.json())
            .then(json => {
                setAccount(json.accounts)
            })
            .catch(err => {
                console.log(err)
            })
    }, [])

    return (
        <div className='app-card'>
            <div className='app-card__title d-flex align-center justify-between mb-5'>
                <h5 className='text-grey font-500 mb-0'>Your accounts</h5>

                <Link to={`${path}/accounts`} className='text-uppercase text-dark font-500 line-base'>all accounts</Link>
            </div>

            <div className='app-card__body'>
                <div className='card-sub-body h-100 px-4' style={{maxHeight: '200px'}}>
                    {account.map(item => <AccountItems key={item.id} item={item} />)}
                </div>
            </div>
        </div>
    )
}

export default Accounts