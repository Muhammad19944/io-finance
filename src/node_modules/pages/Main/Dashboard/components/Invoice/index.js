import React, {useState, useEffect} from 'react'
import { Tabs } from 'antd';
const { TabPane } = Tabs;

import firebase from "firebase/app";

import InvoiceItem from './InvoiceItem'
import AppDateRange from 'components/BaseUI/AppDateRange'
import EmptyInvoice from './EmptyInvoice'

const Invoice = () => {
    const [invoices, setInvoices] = useState([])

    useEffect(() => {
        let url = `/api/invoice`;

        fetch(url)
            .then(res => res.json())
            .then(json => {
                setInvoices(json.invoices)
            })
            .catch(err => {
                console.log(err)
            })
    }, [])

    return (
        <div className='app-card'>
            <div className='app-card__title d-flex align-center justify-between mb-4'>
                <h5 className='text-grey font-500 mb-0'>Invoice</h5>
                <AppDateRange />
            </div>

            <div className='app-card__body'>
                <div className='card-sub-title h-100'>
                    <Tabs
                        defaultActiveKey="1"
                        size='large'
                    >
                        <TabPane 
                            tab={<span className='font-500 text-grey'>All</span>}
                            key="1"
                            className='p-relative'
                        >
                            <div className='card-sub-body h-100 px-6'>
                                {invoices.map(item => ( <InvoiceItem key={item.id} item={item} /> ))}
                            </div>
                            <div className='card-shadow p-absolute w-100'></div>
                        </TabPane>
                        <TabPane 
                            tab={<span className='font-500 text-grey'>Paid</span>}
                            key="2"
                            className='p-relative'
                        >
                            <div className='card-sub-body h-100 px-6'>
                                {invoices.map(item => item.status === 'Paid' ? <InvoiceItem key={item.id} item={item} /> : null)}
                            </div>
                            <div className='card-shadow p-absolute w-100'></div>
                        </TabPane>
                        <TabPane tab={<span className='font-500 text-grey'>Pending</span>} key="3">
                            <div className='card-sub-body h-100 px-6'>
                                {invoices.map(item => item.status === 'Pending' ? <InvoiceItem key={item.id} item={item} /> : null)}
                            </div>
                            <div className='card-shadow p-absolute w-100'></div>
                        </TabPane>
                        <TabPane 
                            tab={<span className='font-500 text-grey'>Cancelled</span>}
                            key="4"
                            className='p-relative'
                        >
                            <div className='card-sub-body h-100 px-6'>
                                {invoices.map(item => item.status === 'Cancelled' ? <InvoiceItem key={item.id} item={item} /> : null)}
                            </div>
                            <div className='card-shadow p-absolute w-100'></div>
                        </TabPane>
                    </Tabs>
                </div>
                {/* <div className='card-sub-body'>
                    asdasd
                </div> */}
            </div>
        </div>
    )
}

export default Invoice