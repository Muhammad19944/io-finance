import React, {useState, useEffect} from 'react'
import { Tabs } from 'antd';
const { TabPane } = Tabs;

import InvoiceItem from './InvoiceItem'

const Invoice = () => {
    const [invoice, setInvoice] = useState([])

    useEffect(() => {
        let url = `/api/invoice`;

        fetch(url)
            .then(res => res.json())
            .then(json => {
                setInvoice(json.invoices)
            })
            .catch(err => {
                console.log(err)
            })
    }, [])

    return (
        <div className='app-card'>
            <div className='app-card__title mb-5'>
                <h5 className='text-grey font-500 mb-0'>Invoice</h5>
            </div>

            <div className='app-card__body'>
                <div className='card-sub-title h-100'>
                    <Tabs defaultActiveKey="1" size='large'>
                        <TabPane tab={<span className='font-500 text-grey'>All</span>} key="1">
                            <div className='card-sub-body h-100 px-6'>
                                {invoice.map(item => ( <InvoiceItem key={item.id} item={item} /> ))}
                            </div>
                        </TabPane>
                        <TabPane tab={<span className='font-500 text-grey'>Paid</span>} key="2">
                            <div className='card-sub-body h-100 px-6'>
                                {invoice.map(item => item.status === 'Paid' ? <InvoiceItem key={item.id} item={item} /> : null)}
                            </div>
                        </TabPane>
                        <TabPane tab={<span className='font-500 text-grey'>Pending</span>} key="3">
                            <div className='card-sub-body h-100 px-6'>
                                {invoice.map(item => item.status === 'Pending' ? <InvoiceItem key={item.id} item={item} /> : null)}
                            </div>
                        </TabPane>
                        <TabPane tab={<span className='font-500 text-grey'>Cancelled</span>} key="4">
                            <div className='card-sub-body h-100 px-6'>
                                {invoice.map(item => item.status === 'Cancelled' ? <InvoiceItem key={item.id} item={item} /> : null)}
                            </div>
                        </TabPane>
                    </Tabs>
                </div>
                {/* <div className='card-sub-body'>
                    asdasd
                </div> */}
            </div>
        </div>
    )
}

export default Invoice