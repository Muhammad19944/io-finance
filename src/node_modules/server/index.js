import { createServer, Model, Factory } from "miragejs"

export function makeServer() {
    createServer({
        models: {
          movie: Model,
          movie2: Model
        },
      
        routes() {
            this.namespace = "api"
        
            this.get("/movies", (schema, request) => {
                //   console.log(schema)
                //   console.log(request)
                return schema.movies.all()
            })
            //OR
            // this.get("/movies")

            // this.post("/movies", function (schema, request) {
            //     let attrs = this.normalizedRequestAttrs()
            //     /*
            //       attrs is this object:
            //         {
            //           firstName: 'Conan',
            //           middleName: 'the',
            //           lastName: 'Barbarian',
            //           teamId: '1'
            //         }
            //     */
            //     return schema.users.create(attrs)
            //   })
        },

        seeds(server) {
            server.create("movie", { name: "Inception", year: 2010 })
            server.create("movie", { name: "Interstellar", year: 2014 })
            server.create("movie", { name: "Dunkirk", year: 2017 })
            server.create("movie2", { name: "Dunkirk2", year: 2019 })
        },

        // ***************************************
        // factories: {
        //     movie: Factory.extend({
        //       title(i) {
        //         return `Movie ${i}` // Movie 1, Movie 2, etc.
        //       },
        
        //       year() {
        //         let min = 1950
        //         let max = 2019
        
        //         return Math.floor(Math.random() * (max - min + 1)) + min
        //       },
        
        //       rating: "PG-13",
        //     }),
        // },

        // seeds(server) {
        //     server.create("movie")
        //     server.create("movie")
        //     server.create("movie", { rating: "R" })

        //     server.db.dump()
        // },

        // ****************************
        // seeds(server) {
        //     server.createList("movie", 10)
        // },
        
    })
}

// *************************************************************