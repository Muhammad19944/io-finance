import { createServer, Model, Factory, RestSerializer } from "miragejs"

export default function invoiceServer() {
    createServer({
        serializers: { application: RestSerializer },

        models: {
          invoice: Model,
        },
      
        routes() {
            this.namespace = "api"
        
            this.get("/invoice", (schema) => {
                return schema.invoices.all()
            })
        },

        factories: {
            invoice: Factory.extend({
                name(i) {
                    return `IO-BN-${i}`
                },
                status() {
                    let statusText = ['Paid', 'Pending', 'Cancelled']

                    return statusText[Math.floor(Math.random() * statusText.length)] // возвращаем рандомные значение для статусов
                }
            })
        },

        seeds(server) {
            server.createList("invoice", 15);
        }
    })
}