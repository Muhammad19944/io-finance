import React from 'react'
import {Route, Switch, useRouteMatch, Redirect} from 'react-router-dom'
import {Layout} from 'antd';

const {Header, Footer, Sider, Content} = Layout;
import routes from 'routes'

import AppSidebar from 'components/Sidebar';
import AppHeader from 'components/Header'
import AppFooter from 'components/Footer'
import './index.css'

const Main = () => {
	const {path} = useRouteMatch()

	return (
		<div className='main-layout'>
			<Layout>
				<Sider width={250}>
					<AppSidebar/>
				</Sider>
				<Layout>
					<Header>
						<AppHeader/>
					</Header>
					<Content>
						<Switch>
							{routes.map((route, index) => (
								<Route
									key={index}
									path={route.path}
									exact={route.exact}
									children={route.component}
								/>
							))}
							<Redirect to={`${path}/dashboard`}/>
						</Switch>
					</Content>
					<Footer>
						<AppFooter/>
					</Footer>
				</Layout>
			</Layout>
		</div>
	)
}

export default Main